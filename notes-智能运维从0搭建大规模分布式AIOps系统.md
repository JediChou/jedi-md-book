# 智能运维从0搭建大规模分布式AIOps系统

* file: 697776 智能运维从0搭建大规模分布式AIOps系统.pdf
* 2021.5.13：進行了一次快速閱讀

* 微博广告每天会产生！ OTB 以上的增量数据，因为微博广告业务复杂，涉及的数据种类较多， 主要分为广告订单、广告受众、广告主、广告内容等主题。
  * Page 100
  * Jedi: 每家的因子不同，故而建模过程、建模结果也应不同。但建模的过程大致类似（套路相同）。

* kimball的建模？
  * Page 100
  * Jedi: 是什么玩意！

* 微博广告数据架构采用业内通用的Lambda 架构，实时计算和离线批处理计算同时运行。
  * Page 100
  * Lambda 架构
  * 离线批处理
  * Jedi: Lambda架构是第一次听说，完全不懂！
  * Jedi: 离线批处理的概念是理解的，但具体如何做呢？
  
* 业务存储、消息存储、离线存储、分析存储和应用存储
  * Page 101
  * Jedi: Kafaka这层很重要，显然需集群支持。
  * Jedi: 分析存储在富士康几乎是没有的！最多只能对应到报表服务器，并没有到自建引擎的地步。
  * Jedi: Clickhouse, Druid是啥子玩意？
  * Jedi: [Apache Druid](https://www.druid.apache.org/)
  * Jedi: [Clickhouse](https://clickhouse.tech/)
  
* 存储模型的设计借用的是业界通用的Kimball 和Inmon 模型。
  * Page 101
  * Jedi: 恕我孤陋寡闻～

* 什么是E-R模型（ Inmon)
  * page 104

* 5.4.3 常见的存储问题及解决方案 (p107)
* 问题2 ：文件太多，存储不了. 处理： 合并小文件，然后压缩，压缩，还是压缩。 p107
* 第6章 大规模数据离线计算分析 p109
* Jedi: 強調了sed和awk~ 請參考《Sed与awk第三版(高清版).pdf》
* 6.1.1 Linux神级工具sed 和awk p109
* 6.1.2 Python数据处理Pandas基础 p111
* 6.1 .3 Python 的优势和不足. p115
* 6.2 分布式离线计算. p116
* 6.2.1 MapReduce 离线计算. p116
* Jedi: 誰能詳解下Hadoop的源代碼？
* 6.2.2 离线计算的数据倾斜问题. p124
* Jedi: 數據傾斜的問題如何發現？有跟踪工具嗎？
* 6.2.3 分布式离线计算的技术枝. p127
* 6.3 案例分析. p128
* Jedi: 图6-9 微博广告数据架构示意图，要好好參詳一下. p128
* 6.3.1 离线计算管理. p129
* ETL, 调度(Oozie 、Airflow 、Azkaban). p130
* 6.3.2 离线计算原子控制. p131
* 6.3.3 离线计算的数据质量. p131
* Jedi: 数据质量管理系统数据质量管理系统. p131
* 第7章 实时计算框架. p133
* 7.1 关于实时流计算. p133
* 7.1.1 如何提高实时流计算的实时性. p133
* 7.1.2 如何提高实时流计算结果的准确性. p134
* 7.1.3 如何提高实时流计算结果的晌应速度. p134
* 7.2 Spark Streamingi.-t算框架介绍. p134
* 7.2.1 Spark Streaming概述. p134
* Jedi: RDD （弹性分布式数据集）. p135
* 7.2.2 基本概念. p135
* 7.2.3 运行原理. p135
* 7.2.4 编程模型
* 7.2.5 Spark Streaming 的使用
* 7.2.6 优化运行时间
* 7.3 Flink计算框架
* 7.3.1 基本概念
* 7.3.2 Flink 特点
* 7.3.3 运行原理
* 7.3.4 Java API 的使用
* 7.4 案例分析
* 7.4.1 背景介绍
* 7.4.2 架构设计
* 7.4.3 效果分析
* 第8章 时序数据分析框架
* 8.1 时j事数据库简介
* 8.1.1 什么是时序数据库
* 8.1.2 时序数据库的特点
* 8.1.3 时序数据库的对比
* 8.2 日寸厚数据库Graphite
* 8.2.1 Graphite 简介
* 8.2.2 Graphite 在微博广告监控系统中的应用
* 8.3 多维分析利器Drui d
* 8.3.1 什么是Druid
* 8.3.2 Druid 架构
* 8.3.3 Druid 在微博广告监控平台中的应用
* 8.4 性能神器ClickHouse
* 8.4.1 什么是ClickHouse
* 8.4.2 ClickHouse 的特性
* 8.4.3 ClickHouse 的不足
* 8.4.4 安装配置ClickHouse
* 8.4.5 表引擎
* 8.4.6 函数支持
* 第9 章 机器学习框架
* 9.1 简介
* 9.2 TensorFlow介绍
* 9.2.1 什么是TensorFlow
* 9.2.2 下载安装
* 9.2.3 “ Hello TensorFlow”示例
* 9.3 TensorFlow进阶
* 9.3.1 基础理论
* 9.3.2 模型准备
* 9.3.3 训练数据
* 9.3.4 模型训练
* 9.3.5 生成seq2seq 旬子
* 9 .3.6 运行演示
* 第3 篇 运维新时代：智能运维技术详解
* 第10 章 数据聚合与关联技术
* Jedi: 比如利用Pandas 、Dask 分析数据，利用Spark 、Hive 处理大数据等，这些都会涉及聚合数据。p208
* 10.1 数据聚合
* 10.1.1 聚合运算

```text
常见的进行时序数据聚合运算的工具如下。
0 Statsd C https: //github. corn/巳tsy/statsd)
。Statsite C Statsd 的C 语言实现， https: //github .corn/statsi te / statsi te )
。Co ll巳ctd ( https: // github.corn/collectd/collectd)
支持的数据／事件类型如下。
0 KeyNalue ：不进行聚合运算，直接存储原值。
0 Sampling ：抽样数据。
0 Gauges ： 固定值。
0 Counter ：计数类数据， 一般会进行求和、累加。
0 Timers ：时间型数据。
0 Sets ：集合型数据。
。Multi - Metric Packets ： 批量数据。
针对T imers 类型的数据，可以做如下运算：
0 Mean ： 求平均值。
0 Min/Max ：求最小值／最大值。
0 Standard deviation ： 求方差。
。Median,P95,P99 ： 求中位数、9 5 %值、99 % 值。
0 Histograms ： 求直方图／柱状图。
0 Sum ： 求累计值。
```

* 10.1.2 多维度聚合
* 10.2 降低维度
* 10.2.1 将告警聚合成关联“事件”
* Jedi: 概念聚类算法AOI (Attribute Oriented Induction ， 基于属性的归纳〉 p215
* 10.2.2 减少误报：告警分类
* Jedi: （警报疲劳）. p217
* 10.3 数据关联
* 10.4 实时数据关联案例
* 10.4.1 设计方案
* 10.4.2 效果

* 第11 章 数据异常点检测技术
* 11.1 概述
* Jedi: EGADSl是Yahoo 公司开发的一个灵活的、准确的、可扩展的异常检测综合系统。 p223
* Jedi: 本章是新知识. **10:01**
* 11.2 异常检测万法
* 11.2.1 基于统计模型的异常点检测
* 11.2.2 基于邻近度的异常点检测
* 11.2.3 基于密度的异常点检测
* 11.3 独立森林

* 第12 章 故障诊断和分析策略
* 12.1 曰志标准化
* 12.2 全链路追踪
* 12.3 SLA的统一
* 12.4 传统的故障定位方法
* 12.4.1 监控告警型
* 12.4.2 日志分析型
* 12.5 人工智能在故障定位领域的应用
* 12.5.1 基于关联规则的相关性分析
* Jedi: 这段内容应该要进行深挖. **10:17**
* 12.5.2 基于决策树的故障诊断
* Jedi: 决策树可能更为合理. **10:18**
* Jedi: 本章也是浅尝辄止. **10:19**

* 第13 章 趋势预测算法
* 13.1 移动平用法
* 13.2 指数平渭法
* 13.3 ARIMA模型
* 13.3.1 简介
* Jedi: 自回归移动平均模型（ Auto-Regressive Integrated Moving Average Model ） p252
* 13.3.2 重要概念
* 13.3.3 参数解释
* 13.3.4 建模步骤
* 13.3.5 ARIMA模型案例
* 13.4 神经网络模型
* 13.4.1 卷积神经网络
* 13.4.2 循环神经网络
* 13.4.3 长短期记忆网络
* 13.4.4 应用说明

* 第4 篇 智能运维架构实践：技术案例详解

* 第14 章 快速构建曰志监控系统
* 14.1 Elasticsearch分布式搜索引擎
* 14.1.1 基本概念
* 14.1.2 分布式文档存储与读取
* 14.1 .3 分布式文档检索
* 14. 1.4 分片管理
* 14.1.5 路由策略
* 14.1.6 映射
* 14.2 可视化工具Kibana
* 14.2.1 Management
* 14.2.2 Discover
* 14.2.3 Visualize
* 14.2.4 Dashboard
* 14.2.5 Timelion
* 14.2.6 Dev Tools
* 14.3 ELK疮建实践
* 14.3.1 Logstash安装配置
* 14.3.2 Elasticsearch集群安装配置
* 14.3.3 Kibana安装配置
* Jedi: 這一章節基本毫無價值. **10:45**

* 第15 章 微博广告智能监控系统
* 15.1 背景介绍
* 15.1.1 监控指标体系
* 15.1.2 功能设计原则
* 15.2 整体架构
* 15.3 核l山功能分析
* 15.3.1 全景监控
* 15.3.2 趋势预测
* 15.3.3 动态阔值
* 15.3.4 服务治理

* 第16章 微博平台通用监控系统
* Graphite 这个体系
* 16.1 背景
* 16.2 整体架构
* 16.3 核心模塊
* 16.3.1 数据采集（ Logtailer )
* 16.3.2 数据路由（ Statsd-proxy )
* 16.3.3 聚合运算（ Statsd )
* 16.3.4 数据分发（ C-Relay ）和数据存储
* 16.3.5 告警模块
* 16.3.6 API设计
* 16.3.7 数据可视化
* 16.4 第三万应用
* 16.4.1 决策支持系统
* 16.4.2 运维自动化
* 16.4.3 成本分析和容量曰报
* 16.4.4 机器学习
* 数据平台（D＋）、数据可视化平台（Hubble）
